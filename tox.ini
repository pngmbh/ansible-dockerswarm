[tox]
minversion = 1.8
envlist = py{37,38}-ansible{28,29}-swarm-{centos,ubuntu}
skipsdist = true

[testenv]
passenv = *
deps =
    -rtest-requirements.txt
    ansible29: ansible<3.0
    ansible28: ansible<2.9
    swarm-centos: scenario=centos
    swarm-ubuntu: scenario=ubuntu
commands =
    centos: {posargs:molecule test -s swarm-centos --destroy always}
    ubuntu: {posargs:molecule test -s swarm-ubuntu --destroy always}
